#res taxonomy: buildings
id: uwm_res_tax__buildings
label: uwm_res_tax__buildings
migration_group: uwm
migration_dependencies: {}

destination:
  plugin: entity:taxonomy_term
  default_bundle: buildings


source:
  plugin: url
  data_fetcher_plugin: http
  data_parser_plugin: json

  urls:
  - https://bios-reservoir.mktgweb.uwmedicine.org/jsonapi/taxonomy_term/buildings?page%5Boffset%5D=0&page%5Blimit%5D=50
  - https://bios-reservoir.mktgweb.uwmedicine.org/jsonapi/taxonomy_term/buildings?page%5Boffset%5D=50&page%5Blimit%5D=50
  - https://bios-reservoir.mktgweb.uwmedicine.org/jsonapi/taxonomy_term/buildings?page%5Boffset%5D=100&page%5Blimit%5D=50

  ids:
    tid:
      type: integer

  item_selector: data/

  fields:
  - name: tid
    label: tid
    selector: /attributes/tid
  - name: uuid
    label: uuid
    selector: /attributes/uuid
  - name: name
    label: name
    selector: /attributes/name
  - name: field_res_address
    label: field_res_address
    selector: /attributes/field_res_address
  - name: field_res_coordinates
    label: field_res_coordinates
    selector: /attributes/field_res_coordinates


process:

  uuid: uuid
  name: name
  uwm_unique_id: uwm_unique_id

  field_plain_coordinates:
#  - plugin: skip_on_empty
#    method: process
  - plugin: concat
    source:
    - field_res_coordinates/lng
    - field_res_coordinates/lat
    delimiter: ','

  field_res_coordinates: field_res_coordinates

  field_res_address: field_res_address
#    langcode:
#    country_code:
#    administrative_area:
#    locality:
#    dependent_locality:
#    postal_code:
#    sorting_code:
#    address_line1:
#    address_line2:
#    organization:
#    given_name:
#    additional_name:
#    family_name:
