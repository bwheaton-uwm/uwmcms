{# TODO: confirm and delete this template #}

{#
/**
 * @file
 * Theme override for Epic Department IDs field on Res Clinic nodes.
 *
 * Custom variables:
 * - view_mode: The view mode in which the entity with this field is currently
 *   being rendered.
 *
 * @see template_preprocess_field()
 * @see uwmbase_preprocess_field()
 */
#}
{% set depts = [] %}
{% for item in items %}
    {% set depts = depts|merge([item.content|render|trim]) %}
{% endfor %}

{% spaceless %}

  {% set classes = css_parents_classes|merge(['btn-cta-solid']) %}

  {% if view_mode == 'full' %}
    {% set classes = classes|merge(['clinic-page__cta-btn']) %}
  {% elseif view_mode == 'card' %}
    {% set classes = classes|merge(['clinic-card__appointment-button', 'clinic-card__book-online-button']) %}
  {% endif %}

  {% set url = 'https://ecare.uwmedicine.org/prod01/OpenScheduling/SignupAndSchedule/EmbeddedSchedule?vt=9000&view=plain&dept=' ~ depts|join(',')|replace(' ', '') %}
  {% set cta_special_attributes = []|merge({'data-context-title': node_title}) %}

  {{ uwm_cta_link('Book online'|t, url, classes, cta_special_attributes) }}

{% endspaceless %}
